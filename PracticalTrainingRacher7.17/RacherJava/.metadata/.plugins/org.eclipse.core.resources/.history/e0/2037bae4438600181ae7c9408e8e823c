import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.File;
import java.io.*;
import java.util.HashMap;
import java.util.*;
import javax.swing.filechooser.*;
public class ManagerWindow extends JFrame implements ActionListener{
	public static void main(String args[]){
	     new ManagerWindow();
	   }
   InputStudent inputBasicInfor;          
   ModifySituation modifyBasic;          
   Inquest basicSerPrint; 
   Delete basicDelete; 
   JMenuBar bar;
   JMenu fileMenu;
   JMenuItem input,modify,serPrint,delete,welcome; //关于学生的基本信息相关操作    
   HashMap<String,Student> basicInfor=null;                    
   File file=null;                             
   CardLayout card=null;                       
   JLabel label=null;                          
   JPanel pCenter;
   public ManagerWindow(){
     input =new JMenuItem("录入学生基本信息");
     modify=new JMenuItem("修改学生基本信息");
     serPrint=new JMenuItem("查询与打印学生基本信息");
     delete=new JMenuItem("删除学生基本信息");
     welcome=new JMenuItem("欢迎界面");
     bar=new JMenuBar();
     fileMenu=new JMenu("菜单选项");
     fileMenu.add(input);
     fileMenu.add(modify);
     fileMenu.add(serPrint);
     fileMenu.add(delete);
     fileMenu.add(welcome);
     bar.add(fileMenu);
     setJMenuBar(bar);
     label=new JLabel("学籍管理系统",JLabel.CENTER);
     label.setIcon(new ImageIcon("welcome.jpg"));
     label.setFont(new Font("隶书",Font.BOLD,36));
     label.setHorizontalTextPosition(SwingConstants.CENTER);
     label.setForeground(Color.red);
     basicInfor=new HashMap<String,Student>();
     input.addActionListener(this);
     modify.addActionListener(this);
     serPrint.addActionListener(this);
     delete.addActionListener(this);
     welcome.addActionListener(this);
     card=new CardLayout();
     pCenter=new JPanel();
     pCenter.setLayout(card); 
     file = new File("basicInfor.txt");
     if(!file.exists()){
        try{
             FileOutputStream out=new FileOutputStream(file);
             ObjectOutputStream objectOut=new ObjectOutputStream(out);
             objectOut.writeObject(basicInfor);
             objectOut.close();
             out.close();
        }
        catch(IOException e){}
     } 
     inputBasicInfor = new InputStudent(file);
     modifyBasic = new ModifySituation(file);
     basicSerPrint = new Inquest(file);
     basicDelete = new Delete(file);
     pCenter.add("欢迎界面",label);
     pCenter.add("录入界面",input);
     pCenter.add("修改界面",modify);
     pCenter.add("删除页面",delete);
     add(pCenter,BorderLayout.CENTER);
     validate();
     setVisible(true);
     setBounds(100,50,460,280);
     setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
     addWindowListener(new WindowAdapter(){
                    public void windowClosing(WindowEvent e){
                      int n=JOptionPane.showConfirmDialog(null,"确认退出吗?","确认对话框",
                                               JOptionPane.YES_NO_OPTION );
                      if(n==JOptionPane.YES_OPTION)  
                         System.exit(0);
                    }});
     validate();   
   }
   public void actionPerformed(ActionEvent e){
     if(e.getSource()==inputBasicInfor){
         inputBasicInfor.clearMess();
         card.show(pCenter,"录入界面");
     }
     else if(e.getSource()==modify){
         modifyBasic.clearMess();
         card.show(pCenter,"修改界面");
     }
     else if(e.getSource()==serPrint){
         basicSerPrint.clearMess();
         basicSerPrint.setLocation(getBounds().x+getBounds().width,getBounds().y);
         basicSerPrint.setVisible(true);
     }
     else if(e.getSource()==delete)
         card.show(pCenter,"删除界面");
     else if(e.getSource()==welcome)
         card.show(pCenter,"欢迎界面");
   }
}
